<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./task2.css">

    <title>Weather App</title>
</head>

<body>
    <h1 class="text-muted">Welcome to my weather app</h1>
    <div class="main mt-5">
        <!-- <form> -->
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Search" id='city' />
            <div class="input-group-btn">
                <button class="btn btn-default" type="submit" onclick="fetchData()">
                    <i class="glyphicon glyphicon-search"></i>
                </button>
            </div>
        </div>

        <hr>
        <!-- </form> -->
        <div class="row city">
            <i class="fa fa-home" style="font-size:48px;color:white;"></i>&nbsp;
            <h4 class="name" id="city-name"></h4>
        </div>

        <div class="weather">
            <div class="weather1">
                <div class="d-flex">
                    <i class="fa fa-cloud" style="font-size:60px;color:white;"></i>
                    <div id="desc">
                    </div>
                </div>
                <div id="">
                    <span><i class="fa fa-thermometer-half" style="font-size:48px;color:white;"></i></span><br />
                    <span id="temp"></span><br />
                    <span id="temp_feel"></span>
                </div>
            </div>

            <div class="weather2 d-flex">
                <div class="d-flex flex-column">
                    <span><i class="fa fa-sun-o" style="font-size:30px;color:white;"></i></span>
                    <div>Sunrise</div>
                    <div id="srise"></div>
                </div>

                <div class="d-flex flex-column">
                    <span><i class="fa fa-moon-o" style="font-size:30px;color:white;"></i></span>
                    <div>Sunset</div>
                    <div id="sset"></div>
                </div>

                <div class="d-flex flex-column">
                    <span><i class="fa fa-sliders" style="font-size:30px;color:white;"></i></span>
                    <div>pressure</div>
                    <div id="pressure"></div>
                </div>

                <div class="d-flex flex-column">
                    <span><i class="fa fa-arrows-v" style="font-size:30px;color:white;"></i></span>
                    <div>Longitud</div>
                    <div id="longi"></div>
                </div>

                <div class="d-flex flex-column">
                    <span><i class="fa fa-arrows-h" style="font-size:30px;color:white;"></i></span>
                    <div>Latitude</div>
                    <div id="lati"></div>
                </div>
            </div>
        </div>

        <div class="contents">
        </div>
    </div>

    <script>
        async function fetchData() {
            const api_key = "b230197ea4cef0ec05eeea9d4ede78eb";
            let city = document.getElementById('city').value;
            const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${api_key}`);
            const data = await res.json();
            document.getElementById('city-name').innerHTML = data?.name;
            document.getElementById('desc').innerHTML = data?.weather[0]?.description;
            document.getElementById('temp').innerHTML = data?.main?.temp + " ℃";
            document.getElementById('temp_feel').innerHTML = data?.main?.feels_like + " ℃";
            document.getElementById('pressure').innerHTML = data?.main?.pressure;
            document.getElementById('sset').innerHTML = data?.sys?.sunset;
            document.getElementById('srise').innerHTML = data?.sys?.sunrise;
            document.getElementById('longi').innerHTML = data?.coord?.lon;
            document.getElementById('lati').innerHTML = data?.coord?.lat;
            document.getElementById("icon").src = `${data?.weather[0].icon}`;
            // document.getElementById('lati').src = 'http://openweathermap.org/img/wn/${a.weather[0].icon}@2x.png';
            console.log(data);
        }
    </script>

</body>

</html>